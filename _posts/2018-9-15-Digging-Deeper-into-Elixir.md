### Erlang VM: The Power behind Elixir
Erlang VM is powerful machine and has proved it metal successfully for many decades.  As it was developed in Ericsson with the intent of solving the problems of the Telecom Industry and this domain has been the  major user of this Beast and rightly so, as it  has been designed to support massively scalable and concurrent applications.

BEAM (Björn’s Abstract Machine) is the machine that executes the code in the Erlang Run time System. The code which we write as part of our application in Elixir or Erlang is executed by BEAM.

Here, we will have a look at various features of the Erlang Virtual machine which makes it different from other Virtual machine or environments. We will also create a simple program for a calculator.

#### A register-based machine
BEAM is a virtual machine which uses registers instead of Stacks. That is, it uses the virtual registers for storing temporary values or for passing arguments when calling functions. It do uses Stacks, to store values which need to survive a function call.

#### Garbage Collected
Elixir\Erlang support Garbage collection and there is no need to free up the memory by the programmer in BEAM. All the allocated memory is automatically collected by the Garbage collector depending upon the program need.

#### Light weighted Processes
Processes are what make Elixir\Erlang stand apart from other programming languages. These lightweight Processes are the key characteristic of BEAM which provide the scaalability and concurrency needed to power the modern demanding web applications.  Millions of Process runs in BEAM and communicates to each other via Messages.

A Elixir process gets its own address space and has its own communication mechanism via message passing and signalling, similar to an OS process. However, they are much light weighted and their execution is carried out by the BEAM Scheduler.

#### Directly Threaded Code
BEAM is a directly threaded-code interpreter. In directly threaded code,  the call and return sequence is replaced by direct jumps to the implementation of the next instruction and this makes it fast.


### Why Erlang VM is a good choice to power the modern Web?
Elixir\Erlang and thus BEAM have been designed to solve specific problems around concurrency. And it has served the purpose well. Concurrency is at heart of this system and it is the perfect choice of systems where millions of concurrent connections need to be maintained.

While it may not be as fast as C++ when it comes to processing images or numbers in a single threaded environment, there are various use cases which provides lot of opportunity to make use of Elixir\BEAM features to design a truly concurrent, fault-tolerant and stable system which can handle millions of connections on a single machine. Some of the examples would be - a web server, a real-time chat application, streaming systems, multiplayer games etc.

### Let's write a simple module in Elixir.
Create a file named Calculator.ex and copy the below code.

```defmodule Calculator do
  def add(a, b) do
    a + b
  end  
  def subtract(a, b) do
	a-b
  end  
  def multiply(a, b) do
	a*b
  end  
  def divide(a, b) do
	a/b
  end  
end```
The Elixir code is kept in .ex or .exs files. This code is compiled into bytecode by the Elixir compiler.

![Elixir Compilation]({{ site.baseurl }}/images/elixir1.jpg "Elixir Compilation")

#### Compiling the module
Open the command prompt and go to the directory where you have saved the Calculator.ex file and Compile using below command-

``` elixirc Calculator.ex ```

The bytecode generated by the compiler is saved to the same directory with name as Elixir.Calculator.BEAM.
You can execute this by opening the iex and load the module. Go the same directory where the bytecode file is located and type iex.

You can directly use the module-
```
Interactive Elixir (1.5.2) - press Ctrl+C to exit (type h() ENTER for help)
iex(1)> Calculator.multiply(3,5)
15
```
There is also a Script mode available in Elixir where the files are saved in .exs extension.
The only difference is that .exs files are compiled in memory and not saved to the disk as byte code BEAM files.

